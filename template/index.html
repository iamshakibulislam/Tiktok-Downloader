{% load static %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Youtube Downloader</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

 <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
<style type="text/css">
  h1,h2,h4,h5,p,spa,div{
    font-family: "Hind Siliguri", sans-serif;
  }

    .navbar {
            background-color: transparent;
            padding-top: 1rem;
            padding-bottom: 1rem;
            padding-left: 7rem;
            padding-right: 18rem;
        }
        .navbar-brand h1 {
            color: white;
            font-weight: bold;
            margin: 0;
        }
        .nav-link {
            color: white !important;
            font-weight: bold;
        }

        .hero_bg{

        	background:linear-gradient(195deg,rgba(0,0,0,.06) 55%,transparent 0),linear-gradient(315deg,transparent 75%,rgba(0,0,0,.06) 0),linear-gradient(163deg,#315e95,#228ba2,#1f98b9);

        }




</style>

  <style>
        .has-search {
            position: relative;
            width: 100%;
        }
        /* Chevron icon styling */
        .has-search .chevron-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #2B719B;
        }
        /* Input field styling */
        .form-control-lg {
            padding-left: 2.5rem; /* Space for the chevron icon */
            padding-right: 4rem; /* Space for the paste button */
            border: none;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }
        /* Search button styling */
        .search-btn {
            background-color: #2B719B;
            color: white;
            border: 1px solid white;
           
            border-radius: 0px 5px 5px 0px;
        }

        .search-btn:hover{
        	background-color: #225B7D;
        	color:white;
        	border:1px solid white;
        }
        /* Paste button styling */
        .btn-paste {
            position: absolute;
            right: 6px; /* Space between paste button and search button */
            top: 50%;
            transform: translateY(-50%);
            background-color: #DAE4FD !important;
            color: #2B719B;
            border: none;
            padding: 0.3rem 0.5rem;
            font-size: 14px;
            border-radius: 5px;
        }
    </style>

</head>
<body>

<div class="container-fluid hero_bg">
 <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand" href="#">
            <img src="{% static 'logo.png' %}" style="width:70px;height:40px" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contact">Contact Us</a>
                </li>
            </ul>
        </div>
    </nav>


    <div class="row justify-content-center herorow" style="margin-top:5rem">
    	<div class="col-md-10">
    		<h1 class="text-center text-white"> <b>TikTok Downloader </b></h1>
    		<h3 class="text-center text-white">Download TikTok Videos and mp3 Without Watermark</h3>

    		

    		<div class="row mt-4 mb-4 pb-4" >
            <div class="col-12 col-md-12 col-lg-10 mx-auto">
                <form id="go" class="form-group" action="{% url 'download' %}" method="GET">
                    <div class="has-search d-flex align-items-center">
                        
                        <div class="position-relative w-100">
                            <!-- Chevron Icon -->
                            <svg class="chevron-icon bi bi-chevron-right" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"></path>
                            </svg>
                            
                           
                            
                            <!-- URL Input -->
                            <input name="url" id="url" type="text" class="form-control w-100 form-control-lg" placeholder="Paste a TikTok video URL here..." aria-label="TikTok URL" required>
                            
                            <!-- Paste Button (Inside the Input Box) -->
                            <button class="btn btn-paste" type="button" aria-label="Paste">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-fill" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"></path>
                                </svg>
                                <span class="pl-1">Paste</span>
                            </button>
                        </div>
                        
                        <!-- Search Button -->
                        <button class="search-btn dsearch btn btn-lg submitbtn" type="submit">
                            <span style="padding-left:24px;padding-top:10px;padding-bottom:10px;padding-right:24px;">Search
                            </span>
                        </button>


                    </div>
                    <div class="row mobilesbtn justify-content-center d-none">
                        <div class="col-sm-6 col-xs-6 d-flex justify-content-center mt-3">
                    <button class="search-btn btn btn-lg submitbtn" type="submit">
                            <span style="padding-left:24px;padding-top:10px;padding-bottom:10px;padding-right:24px;">Search
                            </span>
                        </button>
                    </div>

                    </div>
                </form>
            </div>
        </div>

    	</div>

    </div>


    <!--show the results of video -->

    <style type="text/css">
        .box{
            

            background-size: cover;
            background-position: center;
            position: relative;
            min-width: 280px;
            background-blend-mode: overlay;
            background-color: rgba(20,0,91,.65);

        }


        @media (max-width: 568px) {
          .topimg {
              display: flex;
              justify-content: center !important;
            }

            .prt{
                margin-bottom: 1px !important;
                padding-bottom: 1px !important;
            }

            .mobilesbtn{
                display: block !important;
            }

            .dsearch{
                display: none !important;
            }

            .navbar{
                padding-right: 0rem !important;
                padding-left: 0rem !important;
            }

            .herorow{
                margin-top:3rem !important;
            }

            .loadingimg{
            width: 200px !important;
            height:200px !important;

                }

        .loading-container{
        position: absolute;
        top:20% !important;
        left: 20% !important;


    }


        }
    </style>

    <div class="row justify-content-center">

        <div class="col-md-8 col-sm-12 pb-4">
            <div class="row box pb-4 d-none">
                <div class="col-md-2 pl-4 pt-4 d-flex topimg justify-content-end">
                    <img src="https://tikcdn.io/ssstik/a/aHR0cHM6Ly9wMTYtYW1kLXZhLnRpa3Rva2Nkbi5jb20vdG9zLW1hbGl2YS1hdnQtMDA2OC84ZDg5OGQ4MzViYmYwMWJiOTkwMjFkOTJhMmRlZTg5OH50cGx2LXRpa3Rva3gtY3JvcGNlbnRlci1xOjEwMDoxMDA6cTc1LndlYnA/ZHI9ODgzNSZpZGM9dXNlYXN0NSZub25jZT00NzE2NSZwcz04N2Q2ZTQ4YSZyZWZyZXNoX3Rva2VuPTk2YjEzNTQzZmZiY2NkNjA2YmFmNjI5ZmU3Y2MyNjFjJnM9QVdFTUVfREVUQUlMJnNjPWF2YXRhciZzaGNwPTFkMWE5N2ZjJnNocD00NTEyNjIxNyZ0PTIyMzQ0OWM0" id="author-image" style="height: 90px;width: 90px;border-radius: 100px 100px;">
                </div>

                <div class="col-md-4">

                    <h2 class="text-left text-white pt-4" id="head-text"><b>REYES CAJUCOM</b></h2>
                    <h5 id="maintext" class="text-white text-left prt pb-4">

                    Lamok Problems? try nyo to guys Mosquito Lamp, sigurado lamok ay tepok #mosquitolamp #mosquitolampki
                </h5>

                </div>

                <style type="text/css">
                    .dbtn{
                        background-color: #489ED8;
                        width: 100%;
                        border-radius: 2px !important;
                        color: black;
                    }

                    .dbtn:hover{
                        color:white;
                        background-color: red;
                    }
                </style>

                <div class="col-md-5">

                    <p class="text-center text-white mt-4">PLEASE DISABLE YOUR ADBLOCK TO DOWNLOAD HD QUALITY VIDEOS!
                    </p>

                    <a href="#" id="mp4" class="dbtn btn mb-2  "> <h5> Without Watermark</h5> </a>
                    <a href="#" id="mp3" class="dbtn btn "> <h5>Download MP3 </h5> </a>

                </div>

            </div>

        </div>

    </div>

    <!-- end of showing results of video -->
<style type="text/css">
    .loadingimg{
        width: 400px;
        height:400px;

    }

    .loading-container{
        position: absolute;
        top:20%;
        left: 35%;


    }
</style>

    <!-- loading bar -->

    <div class="row d-none loading-container justify-content-center" id="loadimg">

        <div class="col-md-4 d-flex justify-content-center">

            <img class="loadingimg" src="{% static 'loading-circle.gif' %}">

        </div>

    </div>

    <!--end of loading bar -->



</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>

    function pasteFromClipboard() {
    navigator.clipboard.readText()
        .then(text => {
            document.getElementById('url').value = text;
        })
        .catch(err => {
            console.error('Failed to read clipboard contents: ', err);
        });
}

// Attach this function to the paste button
document.querySelector('.btn-paste').addEventListener('click', pasteFromClipboard);

</script>


<script type="text/javascript">
    
    $('.search-btn').on("click",function(event){
        event.preventDefault();
        var url = $("#url").val();
        $('#loadimg').removeClass("d-none");
        $('.box').addClass('d-none');
        
        //url grabing completed

        $.ajax({

          url:"{% url 'download' %}",
          type:"GET",
          dataType: "json",
          data:{"url":url}
        })

        .done(function(result){

            console.log(result["background_image"]);

            $('#loadimg').addClass("d-none");
            $('.box').removeClass('d-none');

            $(".box").attr("style","background-image:url("+result["background_image"]+")");
            $('#author-image').attr("src",result["author_image"]);
            $('#head-text').text(result["head_text"]);
            $('#maintext').text(result["maintext"]);
            $('#mp4').attr("href","/download_final?name="+result["download_link"]);
            $('#mp3').attr("href","/download_final?name="+result["mp3"]);

        })

        .fail(function(result){
            console.log("failed")
        })
    })
</script>

</body>
</html>